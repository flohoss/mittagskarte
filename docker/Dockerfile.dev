ARG FEDORA_VERSION
FROM fedora:${FEDORA_VERSION}
ENV GOPROXY=https://proxy.golang.org

RUN dnf -y upgrade --refresh
RUN dnf -y install golang
RUN dnf -y install tesseract tesseract-osd tesseract-langpack-deu tesseract-langpack-eng
RUN dnf -y install ImageMagick poppler-utils libwebp

WORKDIR /src

COPY ./src/go.mod .
COPY ./src/go.sum .
RUN go mod download

RUN go install github.com/cosmtrek/air@latest
ENV VERSION=v0.0.0-DEV
ENV BUILDTIME=2023-06-01T08:07:43.454Z
ENV PATH "$PATH:/root/go/bin"
